---
import { Image } from "astro:assets";
import { getCollection } from "astro:content";
import Tags from "./Tags.astro";
import Button from "@components/ui/Button.astro";

const projects = await getCollection("projects");
const projectsData = projects.map(project => project.data)

---

{
  projectsData.map((project) => (
    <section class="md:w-1/2 w-3/4 p-4">
      <article class=" bg-accent1 p-3">
        <div class="hover:scale-105 hover:transform relative flex items-end overflow-hidden duration-100">
          {/* <a href={project.urls.site} aria-label="link to project">
            <Image
              src={project.cover}
              alt={project.coverAlt}
              format="png"
              width={400}
              height={400}
              loading="eager"
            />
          </a> */}
          <a href={project.urls.github} aria-label="link to project">
            <Image
              src={project.cover}
              alt={project.coverAlt}
              format="png"
              width={400}
              height={400}
              loading="eager"
            />
          </a>
        </div>
        <div class="p-2 mt-1">
          <h3 class="text-text font-heading w-full mb-2 text-xl">
            {project.title}
          </h3>
          <p class="text-secondtext font-body text-sm">
            {project.description}
          </p>
          <Tags tags={project.tags} />
        </div>
        <div class="flex flex-row justify-start gap-4">
          {/* <Button
            target="_blank"
            href={project.urls.site}
            aria-label="link to project"
            style={"primary"}
            size={"sm"}
            class={"flex"}
            name="projects"
          >
            Site
          </Button> */}
          <Button
            target="_blank"
            href={project.urls.github}
            style={"primary"}
            size={"sm"}
            class={"flex"}
            name="projects"
          >
            Code
          </Button>
        </div>
      </article>
    </section>
  ))
}
